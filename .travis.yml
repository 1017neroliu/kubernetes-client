#
# Copyright (C) 2015 Red Hat, Inc.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#         http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#

# We use Travis for the following tasks:
# - Download and install `kubectl`, `oc` CLI client tools
# - Configure docker daemon to run insecure registry for OpenShift cluster
# - Execute `oc cluster up` with different environments (metrics profile) : v3.6.0, v3.6.1, v3.7.0

matrix:
  include:
    - env: OC_VERSION="v3.6.0" COMMIT_ID="c4dd4cf"
    - env: OC_VERSION="v3.6.1" COMMIT_ID="008f2d5"
    - env: OC_VERSION="v3.7.0" COMMIT_ID="7ed6862"

sudo: required
dist: trusty

language: java
jdk:
  - oraclejdk8

services:
  - docker

cache:
  directories:
    - $HOME/.m2

install: ./kubernetes-regression-tests/src/test/resources/scripts/prepare-test-environment.sh

before_script: mvn clean install -DskipTests

script:
  # Profile jacoco switches on jacoco coverages, regession-test for running regreesion tests on fabric8/OpenShift.io quickstart projects
  - mvn -Dorg.slf4j.simpleLogger.log.org.apache.maven.cli.transfer.Slf4jMavenTransferListener=warn -B install -pl kubernetes-regression-tests
